@model Djm.OGame.Web.Api.BindingModels.CompoundBindingModel

@{
    ViewBag.Title = "title";
    Layout = "~/Views/Pages/_Layout.cshtml";
}


<body>
    <div>

        <br /><br /><br /><br />
        <div class="row">
            @foreach (var item in Model.Pagination.Items)
            {

                <div class="col-md-8 offset-md-2 col-sm-10 offset-sm-1">

                    <div class="row">
                        <div class="col-md-4 col-12">
                            <a href="http://localhost:53388/articles/@item.Id">
                                <img class="img-fluid rounded" src="@item.Image" alt="Generic placeholder image">
                            </a>

                        </div>
                        <div class="col-md-8 col-12">
                            <a class="h5" href="http://localhost:53388/articles/@item.Id">@Html.DisplayFor(modelItem => item.Title) </a><br />

                            <p style="margin-top: 10px;">@Html.DisplayFor(modelItem => item.Preview)</p>

                            <p style="margin-top: 25px;" class="text-muted">
                                Publié par <a href="#">@item.AuthorName</a> le @item.FormatedPublishDate
                            </p>
                            
                        </div>
                    </div>
                    <hr>
                </div>
            }
        </div>
        <div class="row">
            <div class="col-1"></div>


            <ul class="pagination">

                @{
                    Model.Pagination.Paginate();

                    var prevDisabled = !Model.Pagination.HasPreviousPage ? "disabled" : "";
                    var nextDisabled = !Model.Pagination.HasNextPage ? "disabled" : "";

                    var endVisible = Model.Pagination.End == Model.Pagination.TotalPages ? "d-none" : "";

                    string Active(int i)
                    {
                        return Model.Pagination.CurrentPage == i ? "active" : "";
                    }

                }

                <li class="page-item @prevDisabled"><a class="page-link" href="http://localhost:53388/articles?page=@Model.Pagination.Previous">Précédent</a></li>

                <li class="page-item @Active(1)"><a class="page-link" href="http://localhost:53388/articles?page=1">1</a></li>



                @for (var i = @Model.Pagination.Start + 1; i < @Model.Pagination.End + 1; i++)
                {
                    <li class="page-item @Active(i)"><a class="page-link" href="http://localhost:53388/articles?page=@i">@i</a></li>
                }

                <li class="page-item @Active(@Model.Pagination.TotalPages) @endVisible"><a class="page-link" href="http://localhost:53388/articles?page=@Model.Pagination.TotalPages">@Model.Pagination.TotalPages</a></li>

                <li class="page-item @nextDisabled"><a class="page-link" href="http://localhost:53388/articles?page=@Model.Pagination.Next">Suivant</a></li>

            </ul>

        </div>
    </div>
</body>
