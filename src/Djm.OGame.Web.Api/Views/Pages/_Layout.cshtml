@using System.ComponentModel
@using System.Web.Mvc
@using System.Web.Mvc.Ajax
@using Microsoft.AspNetCore.Http
@model Djm.OGame.Web.Api.BindingModels.CompoundBindingModel
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

<!DOCTYPE html>

<html>
<head>
    <title>Djm Ogame</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

    <script src="~/lib/Microsoft.jQuery.Unobtrusive.Ajax/jquery.unobtrusive-ajax.min.js"></script>

    <link rel="stylesheet" href="~/Css/StyleSheet.css" />
</head>
<body>
    <div>
        <nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-top">
            <a class="navbar-brand" href="http://localhost:53388/api/articles">Djm OGame</a>
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="http://localhost:53388/swagger/">Api</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Infos</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Contact</a>
                </li>
            </ul>

            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                   <button class="btn btn-link"> @Context.Session.GetString("login")</button>
                </li>
                <li class="nav-item">
                    <button id="connectBtn" class="btn btn-default btn-outline btn-circle collapsed" data-toggle="modal" data-target="#loginModal">Connexion</button>
                </li>
            </ul>
        </nav>

        <div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" style="margin-top: 100px">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <div class="container-fluid">
                            <ul class="nav nav-tabs" role="tablist" style="margin-left: 10px;">
                                <li class="nav-item">
                                    <a class="nav-link active" href="#login" role="tab" data-toggle="tab"><h5>&#160 &#160 Se connecter &#160 &#160  </h5></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#register" role="tab" data-toggle="tab"><h5>&#160 &#160 S'enregistrer &#160 &#160 </h5></a>
                                </li>
                            </ul>
                        </div>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="tab-content">

                            <div class="tab-pane active" id="login">
                                <form asp-controller="Account" method="post" asp-action="SignIn" data-ajax>
                                    <div class="form-group">
                                        <label asp-for="Registration.Email">Identifiant</label>
                                        <input asp-for="Registration.Email" class="form-control" name="Email">
                                        <span asp-validation-for="Registration.Email" class="text-danger" />
                                    </div>

                                    <div class="form-group">
                                        <label asp-for="Registration.Password">Mot de passe</label>
                                        <input asp-for="Registration.Password" class="form-control" name="Password">
                                        <span asp-validation-for="Registration.Password" class="text-danger" />
                                    </div>
                                    <p class="text-danger"> @TempData["Error"]</p>
                                    
                                          
                                    <button type="submit" class="btn btn-success btn-block">Se connecter</button>
                                </form>
                            </div>

                            <div class="tab-pane" id="register">
                                <form asp-controller="Account" method="post" asp-action="SignUp">

                                    <div class="form-group">
                                        <label asp-for="Registration.Email"></label>
                                        <input asp-for="Registration.Email" class="form-control" name="Email">
                                        <span asp-validation-for="Registration.Email" class="text-danger" />
                                    </div>

                                    <div class="form-group">
                                        <label asp-for="Registration.Password"></label>
                                        <input asp-for="Registration.Password" class="form-control" name="Password">
                                        <span asp-validation-for="Registration.Password" class="text-danger" />
                                    </div>

                                    <div class="form-group">
                                        <label for="passwordConfirm">Confirmation</label>
                                        <input type="password" class="form-control" name="passwordConfirm">
                                    </div>

                                    <div class="form-group" style="display: inline-block;width:47%">
                                        <label asp-for="Registration.PlayerId" c></label>
                                        <input asp-for="Registration.PlayerId" class="form-control" name="PlayerId">
                                    </div>

                                    <div class="form-group" style="display: inline-block; float: right;width:47%">
                                        <label asp-for="Registration.UniverseId"></label>
                                        <input asp-for="Registration.UniverseId" class="form-control" name="UniverseId" >

                                    </div>
                                    <p class="text-danger"></p>

                                    <button type="submit" class="btn btn-success btn-block">S'enregistrer</button>

                                </form>

                            </div>

                        </div>
                    </div>

                </div>
            </div>
        </div>



        <div>
            @RenderBody()
        </div>
    </div>

<script>

    function Connect()
    {
        if (document.getElementById("connectBtn").innerHTML == "Connexion")
            $('#loginModal').modal('show');
        else
        {
            
        }
    }

</script>

</body>
</html>